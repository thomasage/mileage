<?php

namespace App\DataFixtures;

use App\Entity\Car;
use App\Entity\Record;
use DateTime;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Common\DataFixtures\DependentFixtureInterface;
use Doctrine\Persistence\ObjectManager;

final class RecordFixtures extends Fixture implements DependentFixtureInterface
{
    public function load(ObjectManager $manager): void
    {
        /** @var Car $car1 */
        $car1 = $this->getReference('car1');

        $data = [
            ['2017-09-30', 3929],
            ['2017-10-04', 4462],
            ['2017-10-05', 4464],
            ['2017-10-29', 5613],
            ['2017-11-14', 7354],
            ['2017-11-18', 7873],
            ['2017-11-22', 8209],
            ['2017-12-01', 9382],
            ['2017-12-14', 11065],
            ['2017-12-15', 11147],
            ['2018-01-21', 15591],
            ['2018-01-23', 15845],
            ['2018-01-28', 16487],
            ['2018-01-29', 16756],
            ['2018-01-30', 16934],
            ['2018-01-31', 17113],
            ['2018-02-01', 17285],
            ['2018-02-15', 18979],
            ['2018-02-19', 19524],
            ['2018-02-21', 19701],
            ['2018-03-02', 20113],
            ['2018-03-05', 20409],
            ['2018-03-15', 21647],
            ['2018-03-16', 21728],
            ['2018-03-17', 21878],
            ['2018-03-30', 22865],
            ['2018-04-02', 23146],
            ['2018-04-04', 23325],
            ['2018-04-05', 23410],
            ['2018-04-07', 23745],
            ['2018-04-08', 23855],
            ['2018-04-10', 23936],
            ['2018-04-11', 24049],
            ['2018-04-18', 26075],
            ['2018-04-20', 26156],
            ['2018-04-23', 26252],
            ['2018-04-29', 26701],
            ['2018-05-03', 26704],
            ['2018-05-05', 26714],
            ['2018-05-08', 27009],
            ['2018-05-22', 27009],
            ['2018-05-26', 27308],
            ['2018-05-30', 27537],
            ['2018-06-01', 27633],
            ['2018-06-03', 27824],
            ['2018-06-06', 28131],
            ['2018-06-08', 28307],
            ['2018-06-09', 28469],
            ['2018-06-11', 28751],
            ['2018-06-13', 28906],
            ['2018-06-14', 28987],
            ['2018-06-17', 29468],
            ['2018-06-19', 29553],
            ['2018-06-20', 29635],
            ['2018-06-23', 29848],
            ['2018-06-25', 29959],
            ['2018-06-27', 30031],
            ['2018-06-29', 30126],
            ['2018-07-10', 30710],
            ['2018-07-17', 31026],
            ['2018-07-18', 31263],
            ['2018-07-24', 31558],
            ['2018-07-25', 31568],
            ['2018-07-26', 31649],
            ['2018-08-01', 31924],
            ['2018-08-07', 32104],
            ['2018-08-10', 32277],
            ['2018-08-17', 32369],
            ['2018-08-31', 32461],
            ['2018-09-02', 32646],
            ['2018-09-08', 32750],
            ['2018-09-20', 33024],
            ['2018-09-29', 33042],
            ['2018-09-30', 33116],
            ['2018-11-04', 36148],
            ['2018-11-03', 36041],
            ['2018-10-21', 33774],
            ['2018-10-18', 33585],
            ['2018-11-14', 36508],
            ['2018-11-09', 36304],
            ['2018-11-07', 36220],
            ['2018-11-23', 36778],
            ['2018-12-02', 37067],
            ['2019-01-10', 38487],
            ['2019-01-11', 38569],
            ['2019-01-16', 38932],
            ['2019-01-28', 39457],
            ['2019-03-01', 41619],
            ['2019-02-28', 41536],
            ['2019-03-17', 43402],
            ['2019-03-15', 43143],
            ['2019-03-13', 42964],
            ['2019-03-11', 42796],
            ['2019-03-10', 42722],
            ['2019-03-04', 41997],
            ['2019-03-22', 43749],
            ['2019-03-23', 43955],
            ['2019-03-25', 44172],
            ['2019-04-11', 45691],
            ['2019-04-14', 45973],
            ['2019-04-21', 46479],
            ['2019-05-06', 47785],
            ['2019-05-10', 48224],
            ['2019-05-13', 48645],
            ['2019-05-22', 49451],
            ['2019-05-17', 48992],
            ['2019-05-23', 49451],
            ['2019-06-01', 50171],
            ['2019-06-03', 50534],
            ['2019-06-05', 50625],
            ['2019-06-07', 50815],
            ['2019-06-28', 52562],
            ['2019-07-07', 53080],
        ];

        foreach ($data as $datum) {

            $record = new Record();
            $record
                ->setCar($car1)
                ->setDate(DateTime::createFromFormat('Y-m-d', $datum[0]))
                ->setValue($datum[1]);

            $manager->persist($record);
        }

        $manager->flush();
    }

    public function getDependencies(): array
    {
        return [
            CarFixtures::class,
        ];
    }
}
